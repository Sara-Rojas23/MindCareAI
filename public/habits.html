<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Mis HÃ¡bitos - MindCare AI</title>
    <link rel="stylesheet" href="styles.css?v=6.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="habits-page">
    <div class="container">
        <!-- Header -->
        <header>
            <h1>ğŸ¯ Mis HÃ¡bitos Diarios</h1>
            <p>Construye rutinas saludables para mejorar tu bienestar</p>
            
            <div class="logout-container">
                <span id="userWelcome" class="user-welcome"></span>
                <a href="index.html" class="btn-history" style="text-decoration: none;">ğŸ§  Diario Emocional</a>
                <a href="backup.html" class="btn-history" style="text-decoration: none;">ğŸ’¾ Backups</a>
                <button id="logoutBtn" class="btn-logout">Cerrar SesiÃ³n ğŸ‘‹</button>
            </div>
        </header>

        <main>
            <!-- EstadÃ­sticas del dÃ­a -->
            <section class="habits-stats">
                <div class="stat-card">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-content">
                        <div class="stat-value" id="completedToday">0</div>
                        <div class="stat-label">Completados hoy</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ¯</div>
                    <div class="stat-content">
                        <div class="stat-value" id="activeHabits">0</div>
                        <div class="stat-label">HÃ¡bitos activos</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ”¥</div>
                    <div class="stat-content">
                        <div class="stat-value" id="bestStreak">0</div>
                        <div class="stat-label">Mejor racha</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“ˆ</div>
                    <div class="stat-content">
                        <div class="stat-value" id="percentageToday">0%</div>
                        <div class="stat-label">Progreso de hoy</div>
                    </div>
                </div>
            </section>

            <!-- BotÃ³n para agregar hÃ¡bito -->
            <section class="add-habit-section">
                <button id="addHabitBtn" class="btn-add-habit">
                    <span class="btn-icon">â•</span>
                    <span class="btn-text">Agregar nuevo hÃ¡bito</span>
                </button>
            </section>

            <!-- Lista de hÃ¡bitos -->
            <section class="habits-list-section">
                <h2>ğŸ“‹ HÃ¡bitos de hoy</h2>
                <div id="habitsList" class="habits-list">
                    <!-- AquÃ­ se cargarÃ¡n los hÃ¡bitos dinÃ¡micamente -->
                    <div class="loading-message">
                        <div class="loading-spinner"></div>
                        <p>Cargando hÃ¡bitos...</p>
                    </div>
                </div>

                <div id="emptyState" class="empty-state" style="display: none;">
                    <div class="empty-icon">ğŸŒ±</div>
                    <h3>Â¡Comienza tu viaje de bienestar!</h3>
                    <p>AÃºn no tienes hÃ¡bitos registrados. Crea tu primer hÃ¡bito para comenzar a construir una rutina saludable.</p>
                    <button class="btn-primary" onclick="document.getElementById('addHabitBtn').click()">
                        Crear mi primer hÃ¡bito
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para crear/editar hÃ¡bito -->
    <div id="habitModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Crear nuevo hÃ¡bito</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            
            <form id="habitForm" class="habit-form">
                <div class="form-group">
                    <label for="habitName">
                        <span class="label-text">Nombre del hÃ¡bito</span>
                        <span class="label-required">*</span>
                    </label>
                    <input 
                        type="text" 
                        id="habitName" 
                        placeholder="Ej: Meditar 10 minutos"
                        maxlength="100"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="habitDescription">
                        <span class="label-text">DescripciÃ³n</span>
                        <span class="label-optional">(opcional)</span>
                    </label>
                    <textarea 
                        id="habitDescription" 
                        placeholder="Ej: MeditaciÃ³n guiada por las maÃ±anas"
                        rows="3"
                        maxlength="200"
                    ></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="habitCategory">
                            <span class="label-text">CategorÃ­a</span>
                            <span class="label-required">*</span>
                        </label>
                        <select id="habitCategory" required>
                            <option value="mental">ğŸ§˜â€â™€ï¸ Bienestar Mental</option>
                            <option value="fisico">ğŸ’ª Actividad FÃ­sica</option>
                            <option value="descanso">ğŸ˜´ Descanso</option>
                            <option value="nutricion">ğŸ NutriciÃ³n</option>
                            <option value="personal">ğŸ“š Crecimiento Personal</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="habitFrequency">
                            <span class="label-text">Frecuencia</span>
                            <span class="label-required">*</span>
                        </label>
                        <select id="habitFrequency" required>
                            <option value="diaria">ğŸ“… Diaria</option>
                            <option value="semanal">ğŸ“† Semanal</option>
                            <option value="personalizada">âš™ï¸ Personalizada</option>
                        </select>
                    </div>
                </div>

                <!-- Selector de dÃ­as para frecuencia personalizada -->
                <div id="customDaysSection" class="form-group" style="display: none;">
                    <label>
                        <span class="label-text">DÃ­as de la semana</span>
                        <span class="label-required">*</span>
                    </label>
                    <div class="days-selector">
                        <label class="day-checkbox">
                            <input type="checkbox" name="customDays" value="1">
                            <span class="day-label">L</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="customDays" value="2">
                            <span class="day-label">M</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="customDays" value="3">
                            <span class="day-label">X</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="customDays" value="4">
                            <span class="day-label">J</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="customDays" value="5">
                            <span class="day-label">V</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="customDays" value="6">
                            <span class="day-label">S</span>
                        </label>
                        <label class="day-checkbox">
                            <input type="checkbox" name="customDays" value="0">
                            <span class="day-label">D</span>
                        </label>
                    </div>
                    <small class="form-hint">Selecciona los dÃ­as en los que quieres realizar este hÃ¡bito</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="habitIcon">
                            <span class="label-text">Ãcono</span>
                        </label>
                        <input 
                            type="text" 
                            id="habitIcon" 
                            placeholder="â­"
                            maxlength="2"
                            value="â­"
                        >
                        <small class="form-hint">Usa un emoji para personalizar tu hÃ¡bito</small>
                    </div>

                    <div class="form-group">
                        <label for="habitColor">
                            <span class="label-text">Color</span>
                        </label>
                        <div class="color-picker">
                            <input 
                                type="color" 
                                id="habitColor" 
                                value="#6366f1"
                            >
                            <span id="colorValue">#6366f1</span>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="cancelBtn">
                        Cancelar
                    </button>
                    <button type="submit" class="btn-primary" id="saveHabitBtn">
                        <span class="btn-text">Guardar hÃ¡bito</span>
                        <div class="loading-spinner" style="display: none;"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de progreso -->
    <div id="progressModal" class="modal">
        <div class="modal-content progress-modal">
            <div class="modal-header">
                <h2 id="progressModalTitle">ğŸ“Š Mi Progreso</h2>
                <button class="modal-close" id="closeProgressModal">&times;</button>
            </div>
            
            <div id="progressContent" class="progress-content">
                <div class="loading-message">
                    <div class="loading-spinner"></div>
                    <p>Cargando progreso...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="shared-utils.js?v=6.0"></script>
    <script src="mindcare-auth.js?v=6.0"></script>
    <script src="habits.js?v=6.0"></script>
</body>
</html>
